/*
 * FancyBox-Plus - jQuery Plugin
 * Simple and fancy lightbox alternative
 *
 * Examples and documentation at: http://igorlino.github.io/fancybox-plus/
 *
 * Base version: 1.3.9 (29.09.2016)
 * Custom version: 1.4.2, for NivoCart
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
!function(t){var e,i,n,a,o,s,l,d,r,h,c,f,p,u=0,g={},b=[],w=0,m={},v=[],y=null,x=new Image,P=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,I=/[^\.]\.(swf)\s*$/i,C=1,k=0,O="",j=!1,T=t.extend(t("<div/>")[0],{prop:0}),S=navigator.userAgent.match(/msie [6]/i)&&!window.XMLHttpRequest,A=function(){i.hide(),x.onerror=x.onload=null,y&&y.abort(),e.empty()},D=function(){if(!1===g.onError(b,u,g))return i.hide(),void(j=!1);g.titleShow=!1,g.width="auto",g.height="auto",e.html('<p id="fbplus-error">The requested content cannot be loaded.<br />Please try again later.</p>'),E()},F=function(){var n,a,o,l,d,r,h=b[u];if(A(),g=t.extend({},t.fn.fancyboxPlus.defaults,void 0===t(h).data("fancyboxPlus")?g:t(h).data("fancyboxPlus")),!1!==(r=g.onStart(b,u,g)))if("object"==typeof r&&(g=t.extend(g,r)),o=g.title||(h.nodeName?t(h).attr("title"):h.title)||"",h.nodeName&&!g.orig&&(g.orig=t(h).children("img:first").length?t(h).children("img:first"):t(h)),""===o&&g.orig&&g.titleFromAlt&&(o=g.orig.attr("alt")),n=g.href||(h.nodeName?t(h).attr("href"):h.href)||null,(/^(?:javascript)/i.test(n)||"#"==n)&&(n=null),g.type?(a=g.type,n||(n=g.content)):g.content?a="html":n&&(a=n.match(P)?"image":n.match(I)?"swf":t(h).hasClass("iframe")?"iframe":0===n.indexOf("#")?"inline":"ajax"),a)switch("inline"==a&&(h=n.substr(n.indexOf("#")),a=t(h).length>0?"inline":"ajax"),g.type=a,g.href=n,g.title=o,g.autoDimensions&&("html"==g.type||"inline"==g.type||"ajax"==g.type?(g.width="auto",g.height="auto"):g.autoDimensions=!1),g.modal&&(g.overlayShow=!0,g.hideOnOverlayClick=!1,g.hideOnContentClick=!1,g.enableEscapeButton=!1,g.showCloseButton=!1),g.padding=parseInt(g.padding,10),g.margin=parseInt(g.margin,10),e.css("padding",g.padding+g.margin),t(".fbplus-inline-tmp").off("fbplus-cancel").on("fbplus-change",function(){t(this).replaceWith(s.children())}),a){case"html":e.html(g.content),E();break;case"inline":if(!0===t(h).parent().is("#fbplus-content"))return void(j=!1);t('<div class="fbplus-inline-tmp" />').hide().insertBefore(t(h)).bind("fbplus-cleanup",function(){t(this).replaceWith(s.children())}).bind("fbplus-cancel",function(){t(this).replaceWith(e.children())}),t(h).appendTo(e),E();break;case"image":j=!1,t.fancyboxPlus.showActivity(),(x=new Image).onerror=function(){D()},x.onload=function(){j=!0,x.onerror=x.onload=null,N()},x.src=n;break;case"swf":g.scrolling="no",l='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+g.width+'" height="'+g.height+'"><param name="movie" value="'+n+'"></param>',d="",t.each(g.swf,function(t,e){l+='<param name="'+t+'" value="'+e+'"></param>',d+=" "+t+'="'+e+'"'}),l+='<embed src="'+n+'" type="application/x-shockwave-flash" width="'+g.width+'" height="'+g.height+'"'+d+"></embed></object>",e.html(l),E();break;case"ajax":j=!1,t.fancyboxPlus.showActivity(),g.ajax.win=g.ajax.success,y=t.ajax(t.extend({},g.ajax,{url:n,data:g.ajax.data||{},error:function(t,e,i){t.status>0&&D()},success:function(t,a,o){if(200==("object"==typeof o?o:y).status){if("function"==typeof g.ajax.win){if(!1===(r=g.ajax.win(n,t,a,o)))return void i.hide();"string"!=typeof r&&"object"!=typeof r||(t=r)}e.html(t),E()}}}));break;case"iframe":B()}else D();else j=!1},E=function(){var i=g.width,n=g.height;i=i.toString().indexOf("%")>-1?parseInt((t(window).width()-2*g.margin)*parseFloat(i)/100,10)+"px":"auto"==i?"auto":i+"px",n=n.toString().indexOf("%")>-1?parseInt((t(window).height()-2*g.margin)*parseFloat(n)/100,10)+"px":"auto"==n?"auto":n+"px",e.wrapInner('<div style="width:'+i+"; height:"+n+"; overflow: "+("auto"==g.scrolling?"auto":"yes"==g.scrolling?"scroll":"hidden")+'; position:relative;"></div>'),g.width=e.width(),g.height=e.height(),B()},N=function(){g.width=x.width,g.height=x.height,t("<img />").attr({id:"fbplus-img",src:x.src,alt:g.title}).appendTo(e),B()},B=function(){var o,c;return i.hide(),a.is(":visible")&&!1===m.onCleanup(v,w,m)?(t.event.trigger("fbplus-cancel"),void(j=!1)):(j=!0,t(s.add(n)).off(),t(window).off("resize.fb scroll.fb"),t(document).off("keydown.fb"),a.is(":visible")&&"outside"!==m.titlePosition&&a.css("height",a.height()),v=b,w=u,(m=g).overlayShow?(n.css({"background-color":m.overlayColor,opacity:m.overlayOpacity,cursor:m.hideOnOverlayClick?"pointer":"auto",height:t(document).height()}),n.is(":visible")||(S&&t("select:not(#fbplus-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fbplus-cleanup",function(){this.style.visibility="inherit"}),n.show())):n.hide(),p=K(),L(),a.is(":visible")?(t(l.add(r).add(h)).hide(),o=a.position(),f={top:o.top,left:o.left,width:a.width(),height:a.height()},c=f.width==p.width&&f.height==p.height,void s.fadeTo(m.changeFade,.3,function(){var i=function(){s.html(e.contents()).fadeTo(m.changeFade,1,M)};t.event.trigger("fbplus-change"),s.empty().removeAttr("filter").css({"border-width":m.padding,width:p.width-2*m.padding,height:g.autoDimensions?"auto":p.height-k-2*m.padding}),c?i():(T.prop=0,t(T).animate({prop:1},{duration:m.changeSpeed,easing:m.easingChange,step:H,complete:i}))})):(a.removeAttr("style"),s.css("border-width",m.padding),"elastic"==m.transitionIn?(f=W(),s.html(e.contents()),a.show(),m.opacity&&(p.opacity=0),T.prop=0,void t(T).animate({prop:1},{duration:m.speedIn,easing:m.easingIn,step:H,complete:M})):("inside"==m.titlePosition&&k>0&&d.show(),s.css({width:p.width-2*m.padding,height:g.autoDimensions?"auto":p.height-k-2*m.padding}).html(e.contents()),void a.css(p).fadeIn("none"==m.transitionIn?0:m.speedIn,M))))},L=function(){var e;if(O=m.title||"",k=0,d.empty().removeAttr("style").removeClass(),!1!==m.titleShow)if((O=t.isFunction(m.titleFormat)?m.titleFormat(O,v,w,m):!(!(e=O)||!e.length)&&("float"==m.titlePosition?'<table id="fbplus-title-float-wrap"><tr><td id="fbplus-title-float-left"></td><td id="fbplus-title-float-main">'+e+'</td><td id="fbplus-title-float-right"></td></tr></table>':'<div id="fbplus-title-'+m.titlePosition+'">'+e+"</div>"))&&""!==O){switch(d.addClass("fbplus-title-"+m.titlePosition).html(O).appendTo("body").show(),m.titlePosition){case"inside":d.css({width:p.width-2*m.padding,marginLeft:m.padding,marginRight:m.padding}),k=d.outerHeight(!0),d.appendTo(o),p.height+=k;break;case"over":d.css({marginLeft:m.padding,width:p.width-2*m.padding,bottom:m.padding}).appendTo(o);break;case"float":d.css("left",-1*parseInt((d.width()-p.width-40)/2,10)).appendTo(a);break;default:d.css({width:p.width-2*m.padding,paddingLeft:m.padding,paddingRight:m.padding}).appendTo(a)}d.hide()}else d.hide();else d.hide()},M=function(){t.support.opacity||(t("#fancybox-content").css("filter",0),t("#fancybox-wrap").css("filter",0)),g.autoDimensions&&s.css("height","auto"),a.css("height","auto"),O&&O.length&&d.show(),m.showCloseButton&&l.show(),function(){if((m.enableEscapeButton||m.enableKeyboardNav)&&t(document).on("keydown.fb",function(e){27==e.keyCode&&m.enableEscapeButton?(e.preventDefault(),t.fancyboxPlus.close()):37!=e.keyCode&&39!=e.keyCode||!m.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),t.fancyboxPlus[37==e.keyCode?"prev":"next"]())}),!m.showNavArrows)return r.hide(),void h.hide();(m.cyclic&&v.length>1||0!==w)&&r.show(),(m.cyclic&&v.length>1||w!=v.length-1)&&h.show()}(),m.hideOnContentClick&&s.on("click",t.fancyboxPlus.close),m.hideOnOverlayClick&&n.on("click",t.fancyboxPlus.close),t(window).on("resize.fb",t.fancyboxPlus.resize),m.centerOnScroll&&t(window).on("scroll.fb",t.fancyboxPlus.center),"iframe"==m.type&&t('<iframe id="fbplus-frame" name="fbplus-frame'+(new Date).getTime()+'" '+(navigator.userAgent.match(/msie [6]/i)?'allowtransparency="true""':"")+' scrolling="'+g.scrolling+'" src="'+m.href+'"></iframe>').appendTo(s),a.show(),j=!1,t.fancyboxPlus.center(),m.onComplete(v,w,m),z()},z=function(){var t;v.length-1>w&&void 0!==(t=v[w+1].href)&&t.match(P)&&((new Image).src=t),w>0&&void 0!==(t=v[w-1].href)&&t.match(P)&&((new Image).src=t)},H=function(t){var e={width:parseInt(f.width+(p.width-f.width)*t,10),height:parseInt(f.height+(p.height-f.height)*t,10),top:parseInt(f.top+(p.top-f.top)*t,10),left:parseInt(f.left+(p.left-f.left)*t,10)};void 0!==p.opacity&&(e.opacity=t<.5?.5:t),a.css(e),s.css({width:e.width-2*m.padding,height:e.height-k*t-2*m.padding})},R=function(){return[t(window).width()-2*m.margin,t(window).height()-2*m.margin,t(document).scrollLeft()+m.margin,t(document).scrollTop()+m.margin]},K=function(){var t,e=R(),i={},n=m.autoScale,a=2*m.padding;return m.width.toString().indexOf("%")>-1?i.width=parseInt(e[0]*parseFloat(m.width)/100,10):i.width=m.width+a,m.height.toString().indexOf("%")>-1?i.height=parseInt(e[1]*parseFloat(m.height)/100,10):i.height=m.height+a,n&&(i.width>e[0]||i.height>e[1])&&("image"==g.type||"swf"==g.type?(t=m.width/m.height,i.width>e[0]&&(i.width=e[0],i.height=parseInt((i.width-a)/t+a,10)),i.height>e[1]&&(i.height=e[1],i.width=parseInt((i.height-a)*t+a,10))):(i.width=Math.min(i.width,e[0]),i.height=Math.min(i.height,e[1]))),i.top=parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-i.height-40)),10),i.left=parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-i.width-40)),10),i},W=function(){var e,i,n,a,o=!!g.orig&&t(g.orig),s={};return o&&o.length?((a=(n=o).offset()).top+=parseInt(n.css("paddingTop"),10)||0,a.left+=parseInt(n.css("paddingLeft"),10)||0,a.top+=parseInt(n.css("border-top-width"),10)||0,a.left+=parseInt(n.css("border-left-width"),10)||0,a.width=n.width(),a.height=n.height(),s={width:(e=a).width+2*m.padding,height:e.height+2*m.padding,top:e.top-m.padding-20,left:e.left-m.padding-20}):(i=R(),s={width:2*m.padding,height:2*m.padding,top:parseInt(i[3]+.5*i[1],10),left:parseInt(i[2]+.5*i[0],10)}),s},q=function(){i.is(":visible")?(t("div",i).css("top",-40*C+"px"),C=(C+1)%12):clearInterval(c)};t.fn.fancyboxPlus=function(e){return t(this).length?(t(this).data("fancyboxPlus",t.extend({},e,t.metadata?t(this).metadata():{})).off("click.fb").on("click.fb",function(e){if(e.preventDefault(),!j){j=!0,t(this).blur(),b=[],u=0;var i=t(this).attr("rel")||"";i&&""!=i&&"nofollow"!==i?(b=t("a[rel="+i+"], area[rel="+i+"]"),u=b.index(this)):b.push(this),F()}}),this):this},t.fancyboxPlus=function(e){var i;if(!j){if(j=!0,i=void 0!==arguments[1]?arguments[1]:{},b=[],u=parseInt(i.index,10)||0,t.isArray(e)){for(var n=0,a=e.length;n<a;n++)"object"==typeof e[n]?t(e[n]).data("fancyboxPlus",t.extend({},i,e[n])):e[n]=t({}).data("fancyboxPlus",t.extend({content:e[n]},i));b=jQuery.merge(b,e)}else"object"==typeof e?t(e).data("fancyboxPlus",t.extend({},i,e)):e=t({}).data("fancyboxPlus",t.extend({content:e},i)),b.push(e);(u>b.length||u<0)&&(u=0),F()}},t.fancyboxPlus.showActivity=function(){clearInterval(c),i.show(),c=setInterval(q,66)},t.fancyboxPlus.hideActivity=function(){i.hide()},t.fancyboxPlus.next=function(){return t.fancyboxPlus.pos(w+1)},t.fancyboxPlus.prev=function(){return t.fancyboxPlus.pos(w-1)},t.fancyboxPlus.pos=function(t){j||(t=parseInt(t),b=v,t>-1&&t<v.length?(u=t,F()):m.cyclic&&v.length>1&&(u=t>=v.length?0:v.length-1,F()))},t.fancyboxPlus.cancel=function(){j||(j=!0,t.event.trigger("fbplus-cancel"),A(),g.onCancel(b,u,g),j=!1)},t.fancyboxPlus.close=function(){if(!j&&!a.is(":hidden"))if(j=!0,m&&!1===m.onCleanup(v,w,m))j=!1;else if(A(),t(l.add(r).add(h)).hide(),t(s.add(n)).off(),t(window).off("resize.fb scroll.fb"),t(document).off("keydown.fb"),s.find("iframe").attr("src",S&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==m.titlePosition&&d.empty(),a.stop(),"elastic"==m.transitionOut){f=W();var e=a.position();p={top:e.top,left:e.left,width:a.width(),height:a.height()},m.opacity&&(p.opacity=1),d.empty().hide(),T.prop=1,t(T).animate({prop:0},{duration:m.speedOut,easing:m.easingOut,step:H,complete:i})}else a.fadeOut("none"==m.transitionOut?0:m.speedOut,i);function i(){n.fadeOut("fast"),d.empty().hide(),a.hide(),t.event.trigger("fbplus-cleanup"),s.empty(),m.onClosed(v,w,m),v=g=[],w=u=0,m=g={},j=!1}},t.fancyboxPlus.resize=function(){n.is(":visible")&&n.css("height",t(document).height()),t.fancyboxPlus.center(!0)},t.fancyboxPlus.center=function(){var t,e;j||(e=!0===arguments[0]?1:0,t=R(),!e&&(a.width()>t[0]||a.height()>t[1])||a.stop().animate({top:parseInt(Math.max(t[3]-20,t[3]+.5*(t[1]-s.height()-40)-m.padding)),left:parseInt(Math.max(t[2]-20,t[2]+.5*(t[0]-s.width()-40)-m.padding))},"number"==typeof arguments[0]?arguments[0]:200))},t.fancyboxPlus.init=function(){t("#fbplus-wrap").length||(t("body").append(e=t('<div id="fbplus-tmp"></div>'),i=t('<div id="fbplus-loading"><div></div></div>'),n=t('<div id="fbplus-overlay"></div>'),a=t('<div id="fbplus-wrap"></div>')),(o=t('<div id="fbplus-outer"></div>').append('<div class="fbplus-bg" id="fbplus-bg-n"></div><div class="fbplus-bg" id="fbplus-bg-ne"></div><div class="fbplus-bg" id="fbplus-bg-e"></div><div class="fbplus-bg" id="fbplus-bg-se"></div><div class="fbplus-bg" id="fbplus-bg-s"></div><div class="fbplus-bg" id="fbplus-bg-sw"></div><div class="fbplus-bg" id="fbplus-bg-w"></div><div class="fbplus-bg" id="fbplus-bg-nw"></div>').appendTo(a)).append(s=t('<div id="fbplus-content"></div>'),l=t('<a id="fbplus-close"></a>'),d=t('<div id="fbplus-title"></div>'),r=t('<a id="fbplus-left"><span class="fancy-ico" id="fbplus-left-ico"></span></a>'),h=t('<a id="fbplus-right"><span class="fancy-ico" id="fbplus-right-ico"></span></a>')),l.click(t.fancyboxPlus.close),i.click(t.fancyboxPlus.cancel),r.click(function(e){e.preventDefault(),t.fancyboxPlus.prev()}),h.click(function(e){e.preventDefault(),t.fancyboxPlus.next()}),t.fn.mousewheel&&a.on("mousewheel.fb",function(e,i){j?e.preventDefault():0!=t(e.target).get(0).clientHeight&&t(e.target).get(0).scrollHeight!==t(e.target).get(0).clientHeight||(e.preventDefault(),t.fancyboxPlus[i>0?"prev":"next"]())}),t.support.opacity||a.addClass("fbplus-ie"),S&&(i.addClass("fbplus-ie6"),a.addClass("fbplus-ie6"),t('<iframe id="fbplus-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" tabindex="-1"></iframe>').prependTo(o)))},t.fn.fancyboxPlus.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},t(document).ready(function(){t.fancyboxPlus.init()})}(jQuery);
